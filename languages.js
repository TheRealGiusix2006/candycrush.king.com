window.languages = {
	en: {
		display: 'English',
		font: 'DefaultFonts',
		pageFont: 'Tahoma',
		pageFontSize: '8',
		texts: "{\"preloader_loading_part1_message\":\"Adding frosting\",\"preloader_loading_part2_message\":\"Mixing ingredients\",\"preloader_loading_part3_message\":\"Measuring sugar\",\"preloader_loading_part4_message\":\"Heating oven\",\"preloader_loading_part5_message\":\"Sampling candy mix\",\"preloader_loading_part6_message\":\"Polishing\",\"preloader_loading_header\":\"Making candy\",\"preloader_loading_complete_header\":\"Candy complete!\",\"preloader_tips_header\":\"Did you know?\",\"preloader_tips_cake\":\"Destroy a Cake Bomb for a divine explosion!\",\"preloader_tips_chameleon\":\"The Chameleon Candy is sneaky. It changes candy color with each turn.\",\"preloader_tips_chocolate\":\"Chocolate multiplying is only a nightmare in Candy Crush!\",\"preloader_tips_colorbomb\":\"Try matching each type of candy with a Color bomb for sweet combos.\",\"preloader_tips_dreamworld\":\"Access Dreamworld by completing Level 50!\",\"preloader_tips_dreamworld_2\":\"Go far in Reality to access even more levels in Dreamworld.\",\"preloader_tips_dreamworld_3\":\"Tiffi's slumbers unlock a whole new Dreamworld of fun! \",\"preloader_tips_dreamworld_4\":\"In Dreamworld, don't let Odus tip over! It ruffles his feathers. \",\"preloader_tips_fish\":\"Swedish Fish eat any candy but jelly is its favorite.\",\"preloader_tips_fish_2\":\"Tiffi eats 500 Swedish Fish a day because it?s good for her joints. \",\"preloader_tips_fish_3\":\"Swedish Fish can eat any candy, but difficult candies are their favorite.\",\"preloader_tips_friends\":\"Unlocking new episodes is faster when you play with friends.\",\"preloader_tips_friends_2\":\"Friends can help you pass blocks, get more lives and encourage your progress.\",\"preloader_tips_hammer\":\"Lollipop Hammers will smash any item on the board that gives you a hard time.\",\"preloader_tips_icing\":\"Icing can come in many layers. Be prepared for deliciousness!\",\"preloader_tips_lucky\":\"Match Lucky Candies to reveal exactly the candy you need!\",\"preloader_tips_marmelade\":\"Marmalade covers candies. It's easy to remove but you might get sticky!\",\"preloader_tips_minty\":\"When Minty eats too much candy, his take-off is a bit slow.\",\"preloader_tips_mystery\":\"Mystery candy can be good or bad, but it is always fun to find out.\",\"preloader_tips_odus\":\"Odus carries Tiffi off to Dreamworld whenever she falls asleep!\",\"preloader_tips_pepperbomb\":\"Remove Candy Bombs before they hit 0!\",\"preloader_tips_soda\":\"Tiffi regularly sends home messages-in-a-bottle to recount her adventures.\",\"preloader_tips_soda_2\":\"The Candy Kingdom is one of the vastest lands known to man.\",\"preloader_tips_soda_3\":\"A giant Candy Factory has produced every piece of candy in the Candy Kingdom!\",\"preloader_tips_spawner\":\"Chocolate Spawners create Chocolate out of thin air! Where can I buy one?\",\"preloader_tips_striped\":\"Striped Candy clears a whole line of candies when matched. \",\"preloader_tips_striped_2\":\"Match a Striped Candy and a Color Bomb and get a lot of striped candies.\",\"preloader_tips_striped_3\":\"The direction of the stripes on a striped candy shows which direction it will go.\",\"preloader_tips_striped_4\":\"Form a Striped Candy by matching 4 candies in a row.\",\"preloader_tips_switch\":\"Free Switch can swap two candies that don't match!\",\"preloader_tips_teeth\":\"Sweet Teeth's favorite candies are chocolate, licorice and jelly.\",\"preloader_tips_time\":\"Look for extra time candies to maximize your play in timed levels.\",\"preloader_tips_toffee\":\"Mr. Toffee adopted Tiffi and Kimmy\",\"preloader_tips_toffee_2\":\"Mr. Toffee's favorite candy is actually jelly, not toffee!\",\"preloader_tips_troll\":\"The Bubblegum Troll can halt the Chocolate Spawners for 5 moves!\",\"preloader_tips_troll_2\":\"The Bubblegum Troll knows everything about the Candy Kingdom.\",\"preloader_tips_troll_3\":\"The Bubblegum Troll is mischievous, be ready for anything!\",\"preloader_tips_wrapped\":\"Wrapped candy blow up surrounding candies with a sugary blast!\",\"preloader_tips_wrapped_2\":\"Match 2 wrapped candies to create a 5X5 candy blast!\",\"preloader_tips_wrapped_3\":\"Wrapped Candy creates a delicious explosion when activated.\",\"preloader_tips_yeti\":\"The Yeti bathes in a big bath of soda, five times a day.\",\"preloader_error_message\":\"An error occurred while loading\"}",
		language: 'en',
		locale: 'en_US',
		title: 'Candy Crush Saga',
		ui: {
			UNLOCK_LEVEL_PROMPT: 'Unlock levels until what level? (2825) This action is irreversible.',
			CHARGE_LIVES_PROMPT: 'Charge all the hearts?',
			EXTEND_LIVES_PROMPT: 'Enter the maximum number of hearts.',
			ENTER_PROFILE_NAME: 'Enter the name of the profile',
			NAME_ALREADY_EXISTS: 'That name already exists.',
			NEW_NAME_PROMPT: 'Enter the new name',
			PROFILE_DATA_PROMPT: 'Enter profile data',
			INVALID_DATA: 'Invalid data',
			IMPORT_ALREADY_EXISTS: 'That name already exists. Enter a new name or leave it blank to overwrite',
			PROFILE_NOT_FOUND: 'Profile not found',
			COPY_PROFILE_DATA: 'Copy the exported data',
			BOOSTER_LIST: 'Enter the booster you want in number: \n1. UFO\n2. Stripe brush\n3. Bubblegum troll\n4. Sweet teeth\n5. Joker\n6. Striped and wrapped candies\n7. Anti peppar\n8. Free switch\n9. Coconut wheel\n10. Jelly fish\n11. Lollipop hammer\n12. Extra moves\n13. Color bomb\n14. Extra time',
			BOOSTER_AMOUNT_PROMPT: 'How many do you want? (Enter negative to remove)',
			GOLDBAR_AMOUNT_PROMPT: 'Enter the number of gold bars to add to your bank (Enter negative to decrease them)',
			SWITCH_PROFILES: 'Switch Profiles',
			MANAGE_PROFILES: 'Manage Profiles',
			NEW_PROFILE: 'Create new profile',
			DELETE_PROFILE: 'Delete current profile',
			RENAME_PROFILE: 'Rename current profile',
			IMPORT_PROFILE: 'Import profile',
			EXPORT_PROFILE: 'Export current profile',
			GAME_TOOLS: 'Game Tools',
			UNLOCK_LEVELS: 'Unlock levels',
			CHARGE_LIVES: 'Charge lives',
			EXTEND_LIVES: 'Extend lives',
			ADD_BOOSTERS: 'Add boosters',
			ADD_GOLDBARS: 'Add gold bars',
			LEVEL_EDITOR: 'Level editor',
			SELECT_LANGUAGE: 'Select Language',
			SELECT_VERSION: 'Select Version',
			DELETE_PROFILE_CONFIRM: 'Delete current profile? You will lose all your progress.',
		}
	},
	ko: {
		display: '한국어',
		font: 'KoreanFonts',
		pageFont: '\'굴림\', Gulim',
		pageFontSize: '9',
		// texts: "{\"preloader_loading_part1_message\":\"설탕을 입히는 중\",\"preloader_loading_part2_message\":\"재료 혼합 중\",\"preloader_loading_part3_message\":\"설탕 계량 중\",\"preloader_loading_part4_message\":\"오븐에 굽는 중\",\"preloader_loading_part5_message\":\"캔디 믹스 샘플링 중\",\"preloader_loading_part6_message\":\"광내는 중\",\"preloader_loading_header\":\"캔디 만들기\",\"preloader_loading_complete_header\":\"캔디 완성!\",\"preloader_tips_header\":\"알고 계셨나요?\",\"preloader_tips_cake\":\"케이크 폭탄을 터뜨려서 멋진 폭발을 일으키세요!\",\"preloader_tips_chameleon\":\"카멜레온 캔디는 엉큼해요. 매번 캔디의 색깔을 바꾸거든요.\",\"preloader_tips_chocolate\":\"초콜릿이 늘어나는 것은 Candy Crush에서는 끔찍한 악몽입니다!\",\"preloader_tips_colorbomb\":\"각각의 캔디들을 컬러 폭탄과 매치시켜서 달콤한 콤보를 만들어 보세요.\",\"preloader_tips_dreamworld\":\"50레벨을 달성하면 꿈나라에 갈 수 있어요!\",\"preloader_tips_dreamworld_2\":\"꿈나라에서 훨씬 더 많은 레벨을 열수 있도록 현실에서 열심히 하세요.\",\"preloader_tips_dreamworld_3\":\"티피가 잠들면 재미난 신세계인 꿈나라가 열립니다!\",\"preloader_tips_dreamworld_4\":\"꿈나라에서는 부엉이가 뒤집히지 않도록 하세요! 깃털이 헝클어진답니다.\",\"preloader_tips_fish\":\"젤리 물고기는 어떤 캔디든 먹어치우지만 젤리를 가장 좋아합니다.\",\"preloader_tips_fish_2\":\"티피는 관절에 좋다는 이유로 하루에 스웨덴 물고기 500마리를 먹습니다.\",\"preloader_tips_fish_3\":\"젤리 물고기는 아무 캔디나 먹을 수 있지만, 어려운 캔디들을 더 좋아합니다.\",\"preloader_tips_friends\":\"친구와 함께 하면 새로운 에피소드를 더욱 빠르게 열 수 있습니다.\",\"preloader_tips_friends_2\":\"친구들은 여러분이 장애물을 넘기고 하트를 더 얻거나 게임을 하는데 있어서 도움을 줄 수 있습니다.\",\"preloader_tips_hammer\":\"롤리팝 해머는 게임을 어렵게 만드는 방해물을 없애 줍니다.\",\"preloader_tips_icing\":\"아이싱은 겹겹이 쌓여있어요. 달콤함에 빠질 준비가 되셨나요?\",\"preloader_tips_lucky\":\"럭키 캔디를 매치하면 필요한 캔디를 정확하게 보여줍니다!\",\"preloader_tips_marmelade\":\"마멀레이드는 캔디를 보호합니다. 무척 끈적끈적하지만 제거하기는 쉬워요!\",\"preloader_tips_minty\":\"민티는 캔디를 너무 많이 먹으면 날아 오르는게 조금 느려집니다.\",\"preloader_tips_mystery\":\"미스테리 캔디는 좋을 수도 있고 나쁠 수도 있지만 확인하는 건 언제나 재미있답니다.\",\"preloader_tips_odus\":\"부엉이는 티피가 잠이 들면 언제나 티피를 꿈나라로 데려갑니다!\",\"preloader_tips_pepperbomb\":\"캔디 폭탄에 0이 표시되기 전에 제거하세요!\",\"preloader_tips_soda\":\"티피는 자신의 모험을 알려주기 위해서 주기적으로 병 속에 편지를 넣어 집에 보냅니다.\",\"preloader_tips_soda_2\":\"캔디 왕국은 인간에게 알려진 방대한 땅들 중 하나입니다.\",\"preloader_tips_soda_3\":\"거대한 캔디 공장은 캔디 왕국에 있는 모든 캔디들을 생산하고 있습니다!\",\"preloader_tips_spawner\":\"초콜릿 기계는 허공에다 초콜릿을 만들 수 있습니다! 어디서 살 수 있을까요?\",\"preloader_tips_striped\":\"줄무늬 캔디는 매치에 성공하면 그 줄에 있는 캔디들을 모두 없앱니다.\",\"preloader_tips_striped_2\":\"줄무늬 캔디와 컬러 폭탄을 매치시키고 줄무늬 캔디를 많이 얻으세요.\",\"preloader_tips_striped_3\":\"줄무늬 캔디의 줄무늬 방향은 캔디가 어떤 방향으로 없어질 지를 보여줍니다.\",\"preloader_tips_striped_4\":\"T, L, + 모양으로 캔디 4개 매치에 성공하면 줄무늬 캔디가 만들어집니다.\",\"preloader_tips_switch\":\"맘대로 바꾸기는 매치되지 않는 캔디 두 개를 바꿀 수 있습니다!\",\"preloader_tips_teeth\":\"달콤 사랑은 초콜릿과 리코라이스, 젤리를 좋아합니다.\",\"preloader_tips_time\":\"시간 제한이 있는 레벨에서는 추가 시간 캔디들을 찾아서 플레이 시간을 최대로 늘리세요.\",\"preloader_tips_toffee\":\"토피 아저씨는 티피와 키미를 입양했습니다.\",\"preloader_tips_toffee_2\":\"사실 토피 아저씨가 가장 좋아하는 것은 토피가 아니라 젤리랍니다!\",\"preloader_tips_troll\":\"버블껌 트롤은 이동 횟수 5번 내내 초콜릿 기계를 멈출 수 있습니다!\",\"preloader_tips_troll_2\":\"버블껌 트롤은 캔디 왕국에 대해 모든 것을 알고 있습니다.\",\"preloader_tips_troll_3\":\"버블껌 트롤은 말썽꾸러기니까 마음의 준비를 하세요!\",\"preloader_tips_wrapped\":\"포장 캔디는 달콤한 설탕 폭풍으로 주변의 캔디들을 날려버립니다!\",\"preloader_tips_wrapped_2\":\"포장 캔디 2개를 매치시키면 5X5 캔디 폭발이 이루어집니다!\",\"preloader_tips_wrapped_3\":\"포장 캔디는 활성화되면 맛있는 폭발을 만들어냅니다.\",\"preloader_tips_yeti\":\"예티는 커다란 소다 목욕탕에서 하루에 5번 목욕을 합니다.\",\"preloader_error_message\":\"불러오는 중에 오류가 발생했습니다.\"}",
		language: 'ko',
		locale: 'ko',
		title: '캔디 크러쉬 사가',
		ui: {
			UNLOCK_LEVEL_PROMPT: '몇 레벨까지 잠금 해제할까요? (최대 2825) 이 작업은 취소할 수 없습니다',
			CHARGE_LIVES_PROMPT: '하트를 모두 충전하시겠습니까?',
			EXTEND_LIVES_PROMPT: '최대 하트의 개수를 입력하십시오',
			ENTER_PROFILE_NAME: '프로필 이름을 입력하십시오',
			NAME_ALREADY_EXISTS: '이미 존재하는 이름입니다',
			NEW_NAME_PROMPT: '새 이름을 입력하십시오',
			PROFILE_DATA_PROMPT: '프로필 데이타를 입력하십시오',
			INVALID_DATA: '데이타가 잘못되었습니다',
			IMPORT_ALREADY_EXISTS: '이미 존재하는 이름입니다. 새 이름을 입력하거나 덮어쓰려면 비워두십시오',
			PROFILE_NOT_FOUND: '프로필이 존재하지 않습니다',
			COPY_PROFILE_DATA: '내보낸 프로필 데이타를 복사하십시오',
			BOOSTER_LIST: '부스터의 번호를 입력하십시오. \n1. UFO\n2. 줄무늬 브러쉬\n3. 버블껌 트롤\n4. 달콤한 이빨\n5. 조커\n6. 줄무늬 캔디와 포장 캔디\n7. 안티 페퍼\n8. 맘대로 바꾸기\n9. 코코넛 휠\n10. 젤리 물고기\n11. 롤리팝 해머\n12. 추가 이동 횟수\n13. 컬러 폭탄\n14. 추가 시간',
			BOOSTER_AMOUNT_PROMPT: '추가할 부스터의 개수를 입력하십시오 (음수로 제거)',
			GOLDBAR_AMOUNT_PROMPT: '추가할 골드 바의 수를 입력하십시오 (음수로 제거)',
			SWITCH_PROFILES: '프로필 전환',
			MANAGE_PROFILES: '프로필 관리',
			NEW_PROFILE: '새 프로필 만들기',
			DELETE_PROFILE: '현재 프로필 삭제',
			RENAME_PROFILE: '현재 프로필 이름 바꾸기',
			IMPORT_PROFILE: '프로필 가져오기',
			EXPORT_PROFILE: '현재 프로필 내보내기',
			GAME_TOOLS: '게임 도구',
			UNLOCK_LEVELS: '레벨 잠금 해제',
			CHARGE_LIVES: '하트 충전',
			EXTEND_LIVES: '최대 하트 수 조정',
			ADD_BOOSTERS: '부스터 추가',
			ADD_GOLDBARS: '골드 바 추가',
			LEVEL_EDITOR: '레벨 편집기',
			SELECT_LANGUAGE: '언어 선택',
			SELECT_VERSION: '버전 선택',
			DELETE_PROFILE_CONFIRM: '프로필을 삭제하시겠습니까? 게임 진행 상황이 삭제됩니다',
		}
	},
	zh: {
		display: '中文',
		font: 'JapaneseFonts',
		pageFont: 'undefined',
		pageFontSize: '9',
		language: 'zh',
		locale: 'zh',
		title: 'Candy Crush Saga',
		ui: {
			UNLOCK_LEVEL_PROMPT: '解锁级别到第几级？(2825) 此操作不可逆。',
			CHARGE_LIVES_PROMPT: '充能所有红心？',
			EXTEND_LIVES_PROMPT: '输入最大红心数量。',
			ENTER_PROFILE_NAME: '输入个人资料名称',
			NAME_ALREADY_EXISTS: '该名称已存在。',
			NEW_NAME_PROMPT: '输入新名称',
			PROFILE_DATA_PROMPT: '输入个人资料数据',
			INVALID_DATA: '数据无效',
			IMPORT_ALREADY_EXISTS: '该名称已存在。输入新名称或留空以覆盖',
			PROFILE_NOT_FOUND: '未找到配置文件',
			COPY_PROFILE_DATA: '复制导出的数据',
			BOOSTER_LIST: '请输入您想要的增强道具数量：\n1. UFO\n2. 条纹刷\n3. 泡泡糖巨魔\n4. 甜心牙齿\n5. 小丑\n6. 条纹包装糖果\n7. 反胡椒\n8. 自由开关\n9. 椰子轮\n10. 水母\n11. 棒棒糖锤\n12. 额外移动\n13. 彩色炸弹\n14. 额外时间',
			BOOSTER_AMOUNT_PROMPT: '您想要多少个？ （输入负数即可移除）',
			GOLDBAR_AMOUNT_PROMPT: '输入要添加到银行的金条数量（输入负数即可减少）',
			SWITCH_PROFILES: '切换个人资料',
			MANAGE_PROFILES: '管理个人资料',
			NEW_PROFILE: '创建新个人资料',
			DELETE_PROFILE: '删除当前个人资料',
			RENAME_PROFILE: '重命名当前个人资料',
			IMPORT_PROFILE: '导入个人资料',
			EXPORT_PROFILE: '导出当前个人资料',
			GAME_TOOLS: '游戏工具',
			UNLOCK_LEVELS: '解锁关卡',
			CHARGE_LIVES: '充能生命',
			EXTEND_LIVES: '延长生命',
			ADD_BOOSTERS: '添加助推器',
			ADD_GOLDBARS: '添加金币bars',
			LEVEL_EDITOR: '关卡编辑器',
			SELECT_LANGUAGE: '选择语言',
			SELECT_VERSION: '选择版本',
			DELETE_PROFILE_CONFIRM: '删除当前个人资料？您将丢失所有进度。',
		}
	},
	ja: {
		display: '日本語',
		font: 'JapaneseFonts',
		pageFont: 'undefined',
		pageFontSize: '9',
		language: 'ja',
		locale: 'ja',
		title: 'Candy Crush Saga',
		ui: {
			UNLOCK_LEVEL_PROMPT: '何レベルまでレベルをアンロックしますか？ (2825) この操作は元に戻せません。',
			CHARGE_LIVES_PROMPT: 'すべてのハートをチャージしますか？',
			EXTEND_LIVES_PROMPT: 'ハートの最大数を入力してください。',
			ENTER_PROFILE_NAME: 'プロフィール名を入力してください。',
			NAME_ALREADY_EXISTS: 'その名前は既に存在します。',
			NEW_NAME_PROMPT: '新しい名前を入力してください。',
			PROFILE_DATA_PROMPT: 'プロフィールデータを入力してください。',
			INVALID_DATA: '無効なデータです。',
			IMPORT_ALREADY_EXISTS: 'その名前は既に存在します。 新しい名前を入力するか、空白のままにして上書きしてください',
			PROFILE_NOT_FOUND: 'プロフィールが見つかりません',
			COPY_PROFILE_DATA: 'エクスポートしたデータをコピーします',
			BOOSTER_LIST: '欲しいブースターの番号を入力してください: \n1. UFO\n2. ストライプブラシ\n3. バブルガムトロール\n4. スウィートティース\n5. ジョーカー\n6. ストライプ＆ラッピングキャンディー\n7. アンチペッパー\n8. フリースイッチ\n9. ココナッツホイール\n10. ジェリーフィッシュ\n11. ロリポップハンマー\n12. エクストラムーブ\n13. カラーボム\n14. エクストラタイム',
			BOOSTER_AMOUNT_PROMPT: 'いくつ欲しいですか？ (マイナス番号を入力すると削除されます)',
			GOLDBAR_AMOUNT_PROMPT: 'バンクに追加するゴールドバーの数を入力してください (マイナス番号を入力すると減ります)',
			SWITCH_PROFILES: 'プロファイルを切り替える',
			MANAGE_PROFILES: 'プロファイルを管理する',
			NEW_PROFILE: '新しいプロファイルを作成する',
			DELETE_PROFILE: '現在のプロファイルを削除する',
			RENAME_PROFILE: '現在のプロファイルの名前を変更する',
			IMPORT_PROFILE: 'プロファイルをインポートする',
			EXPORT_PROFILE: '現在のプロファイルをエクスポートする',
			GAME_TOOLS: 'ゲームツール',
			UNLOCK_LEVELS: 'レベルをアンロックする',
			CHARGE_LIVES: 'ライフをチャージする',
			EXTEND_LIVES: 'ライフを延長する',
			ADD_BOOSTERS: 'ブースターを追加する',
			ADD_GOLDBARS: 'ゴールドを追加するバー',
			LEVEL_EDITOR: 'レベルエディター',
			SELECT_LANGUAGE: '言語を選択',
			SELECT_VERSION: 'バージョンを選択',
			DELETE_PROFILE_CONFIRM: '現在のプロフィールを削除しますか？これまでの進行状況はすべて失われます。',
		}
	},
};

function getLanguage() {
	return localStorage.getItem('language') || navigator.language || 'en';
}

function getString(key) {
	var lang = window.languages[getLanguage()];
	if(!lang) return key;
	return window.languages[getLanguage()].ui[key] || window.languages.en.ui[key] || key;
}

function initStrings() {
	var dt, dd, a;
	var lang = window.languages[getLanguage()] || window.languages.en;
	document.querySelectorAll('dl').forEach(el => {
		dt = el.querySelector('dt');
		dd = el.querySelectorAll('dd li');
		dt.innerHTML = getString(dt.innerHTML);
		dd.forEach(ln => {
			a = ln.querySelector('a');
			if(a) a.innerHTML = getString(a.innerHTML);
		});
	});
	
	var style = document.getElementById('pageStyle');
	style.innerHTML += 'body { font-family: ' + lang.pageFont + '; } dl dd li { font-size: ' + lang.pageFontSize + 'pt; }'
}

function setLanguage(lang) {
	localStorage.setItem('language', lang);
	history.go(0);
}

function loadLanguages() {
	var langList = document.getElementById('languageList');
	for(var lang in window.languages) {
		var li = document.createElement('li');
		li.innerHTML = '<a onclick="setLanguage(\'' + lang + '\');">' + escapeHTML(window.languages[lang].display) + '</a>';
		if(getLanguage() == lang)
			li.innerHTML = '<b>' + escapeHTML(window.languages[lang].display) + '</b>';
		langList.appendChild(li);
	}
}

function generateTexts(lang) {
	if(lang == 'en') return;
	var texts = JSON.parse(window.languages.en.texts);
	for(var key in texts) {
		texts[key] = window.gameInitStringsList[lang]['candycrush.candycrush'][key];
	}
	window.languages[lang].texts = JSON.stringify(texts);
}

window.lang = getLanguage();
document.title = window.languages[getLanguage()]?.title || 'Candy Crush Saga';
window.gameInitStrings = window.gameInitStringsList[window.lang];
generateTexts(window.lang);

